
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" name="viewport">
    <title>allen</title>
  </head>

  <body>
    <div id="app"></div>
  </body>

<script src="/js/zepto.min.js"></script>
<script src="/js/socket.io.js"></script>
<script>
(function(){
  var doc = document, body = doc.body;

  var mod = {
    length: 0,

    init: function() {
      var w = this;
      var socket = io.connect('http://localhost:8080');
      w.socket = socket;

      w.initEvent();
    },

    initEvent: function(){
      var w = this;

      w.socket.on('displayInit', function(d){
        w.length = d.str.length;
        for(var i=0;i<w.length; i++){
          var div = $('<div></div>');
          div.attr('id', i);
          $('#app').append(div);
        }
      })

      w.socket.on('display', function(d){
        $('#' + d.index).text(d.text);
      });
    }
  }

  mod.init();
})();

</script>

</html>
